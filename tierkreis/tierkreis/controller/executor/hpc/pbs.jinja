#!/bin/bash
#
# PBS Job Script generated by TIERKREIS

# --- Core Job Specifications ---
#PBS -N {{ job.job_name }}
#PBS -l walltime={{ job.walltime }}
#PBS -l select={{ job.nodes }}:ncpus={{ job.cores_per_node }}{% if job.memory_gb %}:mem={{ job.memory_gb }}gb {% endif %}
{% if job.queue %}#PBS -q {{ job.queue }}{% endif %}
{% if job.group %}#PBS -A {{ job.account }}{% endif %}

# --- Output and Error Handling ---
#PBS -j oe
{% if job.output_path %}#PBS -o {{ job.output_path }}{% else %}#PBS -o {{ job.job_name }}.o$PBS_JOBID{% endif %}
{% if job.error_path and not job.output_path %}#PBS -e {{ job.error_path }}{% endif %}

# --- User-Specific Arguments ---
{% for key, value in job.extra_scheduler_args.items() %}
#PBS {{ key }} {% if value is not none %}{{ value }}{% endif %}
{% endfor %}

# --- Environment Setup ---
{% for key, value in job.environment.items() %}
export {{ key }}="{{ value }}"
{% endfor %}
#PBS -V

# --- User Command ---
echo "Executing command: {{ job.command }}"
{{ job.command }}
